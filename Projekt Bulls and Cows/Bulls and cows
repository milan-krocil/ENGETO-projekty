hlavicka = '''
Bulls nad cows: druhy projekt do Engeto Online Python Akademie

author: Milan Kročil
email: milan.krocil@email.cz
'''
oddelovac = ('-' * 79)
#print(hlavicka, oddelovac, sep="\n")

#### Vygenerovani tajenky a kontrola duplicit ###############################
import random

def osetreni_duplicit_v_cisle (zadana_tajenka):
    kontrola_duplicity = {}
    je_duplicita = [0]

    for zadane_cislo in zadana_tajenka:
        if zadane_cislo in kontrola_duplicity:
            kontrola_duplicity[zadane_cislo] += 1
        else:
            kontrola_duplicity[zadane_cislo] = 1

    print(kontrola_duplicity)
    for cislice in kontrola_duplicity.values():
        if cislice > 1:
            je_duplicita.pop()
            je_duplicita.append(cislice) 
    return je_duplicita

spravna_tajenka = True
while spravna_tajenka: 
    tajenka = str(random.randint(1000,9999))
    duplicita = osetreni_duplicit_v_cisle(tajenka) 
    # kontrola_duplicity_v_tajence = {}
    # duplicita = [0]

    # for cislo in tajenka:
    #     if cislo in kontrola_duplicity_v_tajence:
    #         kontrola_duplicity_v_tajence[cislo] += 1
    #     else:
    #         kontrola_duplicity_v_tajence[cislo] = 1

    # print(kontrola_duplicity_v_tajence)
    # for hodnota in kontrola_duplicity_v_tajence.values():
    #     if hodnota > 1:
    #         duplicita.pop()
    #         duplicita.append(hodnota)    
            
    if duplicita[0] <= 1:
        spravna_tajenka = False
          
###### Zadani hrace a jeho osetreni ###############################################################          
print(tajenka)
#hadani_uzivatele = input("Enter a number: ")

print(
    "Hi there!",
    oddelovac,
    "I've generated a random 4 digit number for you.",
    "Let's play a bulls and cows game.",
    oddelovac, sep='\n'
    )

# def osetreni_hadaneho_cisla(osetreni_cisla):
#     if not int(len(osetreni_cisla)) == 4:
#         print("Hadane cislo nema 4 cislice", "Zadej hadane cislo znovu", sep="\n")
#     elif not osetreni_cisla.isdigit():
#         print("Hadane cislo neobsahuje jen cislice", "Zadej hadane cislo znovu", sep="\n")
#     elif int(osetreni_cisla[0]) == 0:
#         print("Hadane cislo nesmi zacinat nulou", "Zadej hadane cislo znovu", sep="\n")
#     #elif duplicita_v_hadanem_cisle[0] >= 1:
#         #print("V hadanem cisle jsou diplicity cislic","Zadej hadane cislo znovu", sep="\n")
#     return True
# #osetreni = osetreni_hadaneho_cisla (hadani_uzivatele)     

def osetreni_hadaneho_cisla():
    osetreni_zadani = True
    while osetreni_zadani:
        osetreni_cisla = input("Enter a number: ")
        print("Enter a number: ", osetreni_cisla) 
        print(oddelovac)
        duplicita_v_hadanem_cisle = osetreni_duplicit_v_cisle (osetreni_cisla)
        print(duplicita_v_hadanem_cisle)
        if not int(len(osetreni_cisla)) == 4:
            print("Hadane cislo nema 4 cislice", "Zadej hadane cislo znovu", sep="\n")
        elif not osetreni_cisla.isdigit():
            print("Hadane cislo neobsahuje jen cislice", "Zadej hadane cislo znovu", sep="\n")
        elif int(osetreni_cisla[0]) == 0:
            print("Hadane cislo nesmi zacinat nulou", "Zadej hadane cislo znovu", sep="\n")
        elif duplicita_v_hadanem_cisle[0] >= 1:
            print("V hadanem cisle jsou diplicity cislic","Zadej hadane cislo znovu", sep="\n")
        else:
            osetreni_zadani = False
    return osetreni_cisla

hadani_uzivatele = osetreni_hadaneho_cisla()

print(tajenka)
print(hadani_uzivatele)


def vypocet_poctu_cow (vygenerovana_tajenka, tip_uzivatele):
    vypocet_cow = set(vygenerovana_tajenka) & set(tip_uzivatele)
    if len(vypocet_cow) >= 1:
        print(len(vypocet_cow), "cows")
    else:
        print(len(vypocet_cow), "cow") 
    return vypocet_cow   

cow = vypocet_poctu_cow (tajenka, hadani_uzivatele)

def vypocet_poctu_bull (cislo_z_tajenky, cislo_z_tipu_uzivatele):
    list_cislo_z_tajenky = list(cislo_z_tajenky)
    list_cislo_z_tipu_uzivatele = list(cislo_z_tipu_uzivatele)
    vypocet_bull = 0
    for hadani_bull in range(len(list_cislo_z_tajenky)):
        if list_cislo_z_tajenky[hadani_bull] == list_cislo_z_tipu_uzivatele[hadani_bull]:
            vypocet_bull += 1
    if vypocet_bull >= 1:
        print(vypocet_bull, "bulls")
    else:
        print(vypocet_bull, "bull")   
    return vypocet_bull
    
bull = vypocet_poctu_bull (tajenka,hadani_uzivatele)
print(bull)


hadani = True
pocet_pokusu = 1
#osetreni = osetreni_hadaneho_cisla (hadani_uzivatele)   
while hadani:
    if bull != 4:
        print('neuhodnuto')
        print("tajenka je:", tajenka)
        print("Hadani uzivatele:", hadani_uzivatele)
        hadani_uzivatele = osetreni_hadaneho_cisla()                   
        cow = vypocet_poctu_cow (tajenka,hadani_uzivatele)
        bull = vypocet_poctu_bull(tajenka,hadani_uzivatele)
        pocet_pokusu += 1
        #hadani = False
    else:
        print(hadani_uzivatele)
        print("Correct, you've guessed the right number")
        print("in", pocet_pokusu, "guesses!")
        hadani = False

print(pocet_pokusu)
